% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/analysis_DataPreprocessing.R
\name{analysis.DataPreprocessing}
\alias{analysis.DataPreprocessing}
\title{Preprocess Personality Survey Data}
\usage{
analysis.DataPreprocessing(df, FactorNames = strsplit("OCEAN", "")[[1]])
}
\arguments{
\item{df}{A data frame containing the raw survey data. It is expected to have columns for personality items (e.g., \code{A1}, \code{C1}...) and corresponding demographic blocks (e.g., \code{age_A}, \code{gender_A}). See the function's code comments for the expected structure.}

\item{FactorNames}{A character vector of single-letter prefixes used to identify the personality factor items. Defaults to \code{c("O", "C", "E", "A", "N")} for the Big Five model.}
}
\value{
A list containing three elements:
\item{ID}{A vector of participant IDs corresponding to the cleaned data.}
\item{X}{A numeric data frame or matrix containing only the cleaned personality item data, suitable for modeling.}
\item{df}{The preprocessed version of the input data frame, including the harmonized \code{age_min} and \code{gender_vote} columns and filtered to match the rows in \code{X}.}
}
\description{
This function preprocesses a data frame containing personality survey
data, specifically tailored for a structure where items from different factors
(e.g., Big Five "OCEAN" traits) are in separate blocks.
}
\details{
This function is designed to clean and restructure a specific type of psychological survey data before statistical modeling. The primary goal is to extract a clean numeric matrix of personality items (\code{X}) and a corresponding processed data frame (\code{df}).

The key preprocessing steps are:
\enumerate{
\item \strong{Filtering for Complete Responses}: The function first identifies all columns corresponding to the personality items (e.g., \code{O1}, \code{C1}, \code{E1}, etc.) based on the \code{FactorNames} argument. It then filters the data frame to retain only the rows (participants) that have no missing values (\code{NA}) across \emph{all} of these item columns. This ensures that the subsequent analyses are performed on a complete dataset. This step is statistically important as many multivariate models (like Factor Analysis or GMM) require complete data.
\item \strong{Harmonizing Demographic Data}:
\itemize{
\item \code{age_min}: It calculates a single age value for each participant by taking the minimum of all available age columns (e.g., \code{age_O}, \code{age_C}, etc.). This resolves potential discrepancies.
\item \code{gender_vote}: It creates a single, consistent gender variable. For each participant, it inspects all gender columns (e.g., \code{gender_O}, \code{gender_C}) and assigns the most frequently occurring value. This "voting" mechanism is a robust method for data harmonization. The resulting variable is then converted to an English factor (\code{male}, \code{female}).
}
\item \strong{Extracting the Analysis Matrix (\code{X})}: A final matrix \code{X} is created containing only the numeric responses to the personality items. This matrix is the primary input for subsequent multivariate statistical analyses like clustering or factor analysis.
}

The function also prints a summary of the resulting matrix \code{X} to the console, including its dimensions and the count of items per factor, which serves as a quick diagnostic check.
}
